# åŸºäºçœ¼éƒ¨çš„æƒ…ç»ªä¸ IQ/EQ è¯„åˆ†ç³»ç»Ÿ

<div align="center">

![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)
![PyTorch](https://img.shields.io/badge/PyTorch-2.0+-orange.svg)
![License](https://img.shields.io/badge/License-MIT-green.svg)

**é€šè¿‡çœ¼éƒ¨å›¾åƒåˆ†æäººç±»æƒ…ç»ªã€æ™ºå•†å’Œæƒ…å•†çš„æ·±åº¦å­¦ä¹ ç³»ç»Ÿ**

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [Demo ç¤ºä¾‹](#demo-ç¤ºä¾‹) â€¢ [è¯„åˆ†ç»†åˆ™](#è¯„åˆ†ç»†åˆ™) â€¢ [è®­ç»ƒæŒ‡å—](#è®­ç»ƒæŒ‡å—)

</div>

---

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºæ·±åº¦å­¦ä¹ çš„å¤šä»»åŠ¡å­¦ä¹ ç³»ç»Ÿï¼Œé€šè¿‡åˆ†æçœ¼éƒ¨åŒºåŸŸå›¾åƒæ¥ï¼š
- **æƒ…ç»ªè¯†åˆ«**ï¼šè¯†åˆ« 7 ç§åŸºæœ¬æƒ…ç»ªï¼ˆæ„¤æ€’ã€åŒæ¶ã€ææƒ§ã€å¿«ä¹ã€ä¸­æ€§ã€æ‚²ä¼¤ã€æƒŠè®¶ï¼‰
- **æƒ…ç»ªç»´åº¦åˆ†æ**ï¼šè¯„ä¼°æ•ˆä»·ï¼ˆValenceï¼‰å’Œå”¤é†’åº¦ï¼ˆArousalï¼‰
- **èƒ½åŠ›è¯„ä¼°**ï¼šæä¾› IQ å’Œ EQ çš„ä»£ç†åˆ†æ•°ï¼ˆå®éªŒæ€§ï¼‰

> âš ï¸ **é‡è¦æç¤º**ï¼šç›®å‰å°šæ— åŒè¡Œè¯„å®¡çš„è¯æ®æ”¯æŒä»…å‡­çœ¼éƒ¨å›¾åƒè¯„ä¼° IQ/EQã€‚é¡¹ç›®ä¸­çš„ IQ/EQ é¢„æµ‹å¤´æ˜¯å®éªŒæ€§çš„ï¼Œéœ€è¦æ¥è‡ªå—æ§ç ”ç©¶çš„æ ‡æ³¨æ•°æ®æ‰èƒ½å¯ä¿¡ä½¿ç”¨ã€‚**ä»…é™ç ”ç©¶ç”¨é€”ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å†³ç­–ç³»ç»Ÿã€‚**

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

- ğŸ¯ **å¤šä»»åŠ¡å­¦ä¹ **ï¼šåŒæ—¶è¿›è¡Œæƒ…ç»ªåˆ†ç±»å’Œå›å½’ä»»åŠ¡
- ğŸ‘ï¸ **æ™ºèƒ½çœ¼éƒ¨æå–**ï¼šæ”¯æŒ MediaPipe å’Œ Sa2VA ä¸¤ç§æå–æ–¹æ³•
- ğŸš€ **é«˜æ•ˆè®­ç»ƒ**ï¼šåŸºäº ResNet18 çš„è½»é‡çº§æ¨¡å‹ï¼Œæ”¯æŒ GPU åŠ é€Ÿ
- ğŸ“Š **å®Œæ•´è¯„ä¼°**ï¼šæä¾›æƒ…ç»ªåˆ†ç±»å‡†ç¡®ç‡ã€F1 åˆ†æ•°å’Œå›å½’æŒ‡æ ‡
- ğŸ”§ **æ˜“äºä½¿ç”¨**ï¼šæä¾›å®Œæ•´çš„é¢„å¤„ç†ã€è®­ç»ƒå’Œæ¨ç†æµç¨‹
- ğŸ“ˆ **å¯è§†åŒ–ç»“æœ**ï¼šè‡ªåŠ¨ç”Ÿæˆé¢„æµ‹ç»“æœå’Œå¯è§†åŒ–æŠ¥å‘Š

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒé…ç½®

```bash
# å…‹éš†é¡¹ç›®
cd /code/sa2va_wzx/eye_emotion_iq

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv
source .venv/bin/activate  # Linux/Mac
# æˆ– .venv\Scripts\activate  # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### å¿«é€Ÿæ¨ç†

```bash
# ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œæ¨ç†
python -m src.demo \
  --image data/raw/your_image.jpg \
  --checkpoint checkpoints/epoch_30.pt \
  --output-eye data/demo_output/result_eye.jpg
```

---

## ğŸ¬ Demo ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šæƒ…ç»ªè¯†åˆ«ä¸èƒ½åŠ›è¯„ä¼°

**åŸå›¾ï¼š**
![åŸå›¾](data/raw/1f2718fc02a97386aaa1b70554e12b1c.png)
- è¾“å…¥å›¾åƒï¼š`data/raw/1f2718fc02a97386aaa1b70554e12b1c.png`
- å›¾åƒå°ºå¯¸ï¼š1098Ã—1574 åƒç´ 

**æå–çš„çœ¼éƒ¨åŒºåŸŸï¼š**
![çœ¼éƒ¨åŒºåŸŸ](data/demo_output/result_eye.jpg)
- è¾“å‡ºå›¾åƒï¼š`data/demo_output/result_eye.jpg`
- å›¾åƒå°ºå¯¸ï¼š224Ã—224 åƒç´ 
- æå–æ–¹æ³•ï¼šMediaPipe å…³é”®ç‚¹æ£€æµ‹

**é¢„æµ‹ç»“æœï¼š**

```
============================================================
é¢„æµ‹ç»“æœ
============================================================

ã€æƒ…ç»ªé¢„æµ‹ã€‘
  ä¸»è¦æƒ…ç»ª: ä¸­æ€§
  ç½®ä¿¡åº¦: 81.98%

  æ‰€æœ‰æƒ…ç»ªæ¦‚ç‡:
    - æ„¤æ€’: 0.00%
    - åŒæ¶: 0.00%
    - ææƒ§: 1.92%
    - å¿«ä¹: 0.97%
    - ä¸­æ€§: 81.98%
    - æ‚²ä¼¤: 15.10%
    - æƒŠè®¶: 0.02%

ã€æƒ…ç»ªç»´åº¦ã€‘
  æ•ˆä»· (Valence): 0.322 (èŒƒå›´: -1 åˆ° 1ï¼Œæ­£å€¼è¡¨ç¤ºç§¯æ)
  å”¤é†’åº¦ (Arousal): 0.046 (èŒƒå›´: -1 åˆ° 1ï¼Œæ­£å€¼è¡¨ç¤ºé«˜å”¤é†’)

ã€èƒ½åŠ›è¯„ä¼°ã€‘
  IQ ä»£ç†åˆ†æ•°: 52.9/100
  EQ ä»£ç†åˆ†æ•°: 46.0/100
============================================================
```

**ç»“æœè§£è¯»ï¼š**
- âœ… **æƒ…ç»ªè¯†åˆ«å‡†ç¡®**ï¼šæ¨¡å‹ä»¥ 81.98% çš„ç½®ä¿¡åº¦è¯†åˆ«ä¸º"ä¸­æ€§"æƒ…ç»ª
- ğŸ“Š **æƒ…ç»ªç»´åº¦**ï¼šæ•ˆä»· 0.322 è¡¨ç¤ºç•¥åç§¯æï¼Œå”¤é†’åº¦ 0.046 è¡¨ç¤ºä½å”¤é†’çŠ¶æ€
- ğŸ¯ **èƒ½åŠ›è¯„ä¼°**ï¼šIQ 52.9/100ï¼ˆä¸­ç­‰æ°´å¹³ï¼‰ï¼ŒEQ 46.0/100ï¼ˆä¸­ç­‰æ°´å¹³ï¼‰

---

## ğŸ“Š è¯„åˆ†ç»†åˆ™

### 1. æƒ…ç»ªåˆ†ç±»è¯„åˆ†

**æ”¯æŒçš„ 7 ç§æƒ…ç»ªç±»åˆ«ï¼š**

| æ ‡ç­¾ | æƒ…ç»ª | è¯´æ˜ |
|------|------|------|
| 0 | æ„¤æ€’ (Angry) | çœ‰æ¯›ç´§çš±ï¼Œçœ¼ç¥é”åˆ© |
| 1 | åŒæ¶ (Disgust) | çœ‰å¤´ç´§é”ï¼Œçœ¼ç¥å›é¿ |
| 2 | ææƒ§ (Fear) | çœ¼ç›çå¤§ï¼Œçœ¼ç¥ç´§å¼  |
| 3 | å¿«ä¹ (Happy) | çœ¼è§’ä¸Šæ‰¬ï¼Œçœ¼ç¥æ˜äº® |
| 4 | ä¸­æ€§ (Neutral) | è¡¨æƒ…å¹³é™ï¼Œçœ¼ç¥è‡ªç„¶ |
| 5 | æ‚²ä¼¤ (Sad) | çœ¼è§’ä¸‹å‚ï¼Œçœ¼ç¥é»¯æ·¡ |
| 6 | æƒŠè®¶ (Surprise) | çœ¼ç›çå¤§ï¼Œçœ‰æ¯›ä¸Šæ‰¬ |

**è¯„ä¼°æŒ‡æ ‡ï¼š**
- **å‡†ç¡®ç‡ (Accuracy)**ï¼šæ­£ç¡®åˆ†ç±»çš„æ ·æœ¬æ¯”ä¾‹
- **F1 åˆ†æ•° (F1-Score)**ï¼šç²¾ç¡®ç‡å’Œå¬å›ç‡çš„è°ƒå’Œå¹³å‡
- **ç½®ä¿¡åº¦ (Confidence)**ï¼šæ¨¡å‹å¯¹é¢„æµ‹ç»“æœçš„ç½®ä¿¡ç¨‹åº¦ï¼ˆ0-100%ï¼‰

### 2. æƒ…ç»ªç»´åº¦è¯„åˆ†

**æ•ˆä»· (Valence)ï¼šèŒƒå›´ [-1, 1]**
- **æ­£å€¼**ï¼šç§¯ææƒ…ç»ªï¼ˆå¿«ä¹ã€æ»¡è¶³ã€å…´å¥‹ï¼‰
- **è´Ÿå€¼**ï¼šæ¶ˆææƒ…ç»ªï¼ˆæ‚²ä¼¤ã€æ„¤æ€’ã€ææƒ§ï¼‰
- **æ¥è¿‘ 0**ï¼šä¸­æ€§æƒ…ç»ª

**å”¤é†’åº¦ (Arousal)ï¼šèŒƒå›´ [-1, 1]**
- **æ­£å€¼**ï¼šé«˜å”¤é†’ï¼ˆå…´å¥‹ã€ç´§å¼ ã€è­¦è§‰ï¼‰
- **è´Ÿå€¼**ï¼šä½å”¤é†’ï¼ˆå¹³é™ã€æ”¾æ¾ã€å›°å€¦ï¼‰
- **æ¥è¿‘ 0**ï¼šä¸­ç­‰å”¤é†’

**è¯„åˆ†ç¤ºä¾‹ï¼š**
```
æ•ˆä»·: 0.322  â†’ ç•¥åç§¯æï¼ˆè½»å¾®å¿«ä¹å€¾å‘ï¼‰
å”¤é†’åº¦: 0.046 â†’ ä½å”¤é†’ï¼ˆå¹³é™çŠ¶æ€ï¼‰
```

### 3. IQ ä»£ç†åˆ†æ•°ï¼šèŒƒå›´ [0, 100]

**è¯„åˆ†æ ‡å‡†ï¼š**

| åˆ†æ•°åŒºé—´ | ç­‰çº§ | è¯´æ˜ |
|---------|------|------|
| 90-100 | ä¼˜ç§€ | æé«˜çš„è®¤çŸ¥èƒ½åŠ›æŒ‡æ ‡ |
| 80-89 | è‰¯å¥½ | è¾ƒé«˜çš„è®¤çŸ¥èƒ½åŠ›æŒ‡æ ‡ |
| 70-79 | ä¸­ç­‰åä¸Š | ä¸­ç­‰åä¸Šçš„è®¤çŸ¥èƒ½åŠ› |
| 60-69 | ä¸­ç­‰ | å¹³å‡æ°´å¹³çš„è®¤çŸ¥èƒ½åŠ› |
| 50-59 | ä¸­ç­‰åä¸‹ | ç•¥ä½äºå¹³å‡æ°´å¹³çš„è®¤çŸ¥èƒ½åŠ› |
| 40-49 | è¾ƒä½ | è¾ƒä½çš„è®¤çŸ¥èƒ½åŠ›æŒ‡æ ‡ |
| 0-39 | å¾ˆä½ | å¾ˆä½çš„è®¤çŸ¥èƒ½åŠ›æŒ‡æ ‡ |

> âš ï¸ **é‡è¦è¯´æ˜**ï¼šIQ åˆ†æ•°æ˜¯åŸºäºçœ¼éƒ¨ç‰¹å¾çš„ä»£ç†æŒ‡æ ‡ï¼Œ**ä¸æ˜¯çœŸå®çš„ IQ æµ‹è¯•ç»“æœ**ã€‚ä»…ç”¨äºç ”ç©¶ç›®çš„ï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šçš„å¿ƒç†è¯„ä¼°ã€‚

### 4. EQ ä»£ç†åˆ†æ•°ï¼šèŒƒå›´ [0, 100]

**è¯„åˆ†æ ‡å‡†ï¼š**

| åˆ†æ•°åŒºé—´ | ç­‰çº§ | è¯´æ˜ |
|---------|------|------|
| 90-100 | ä¼˜ç§€ | æé«˜çš„æƒ…ç»ªç†è§£å’Œç®¡ç†èƒ½åŠ› |
| 80-89 | è‰¯å¥½ | è¾ƒé«˜çš„æƒ…ç»ªæ™ºåŠ› |
| 70-79 | ä¸­ç­‰åä¸Š | è¾ƒå¥½çš„æƒ…ç»ªæ„ŸçŸ¥èƒ½åŠ› |
| 60-69 | ä¸­ç­‰ | å¹³å‡æ°´å¹³çš„æƒ…ç»ªæ™ºåŠ› |
| 50-59 | ä¸­ç­‰åä¸‹ | æƒ…ç»ªæ„ŸçŸ¥èƒ½åŠ›ç•¥ä½äºå¹³å‡æ°´å¹³ |
| 40-49 | è¾ƒä½ | æƒ…ç»ªç†è§£èƒ½åŠ›è¾ƒä½ |
| 0-39 | å¾ˆä½ | æƒ…ç»ªæ™ºåŠ›æŒ‡æ ‡å¾ˆä½ |

> âš ï¸ **é‡è¦è¯´æ˜**ï¼šEQ åˆ†æ•°æ˜¯åŸºäºçœ¼éƒ¨æƒ…ç»ªè¡¨è¾¾çš„ä»£ç†æŒ‡æ ‡ï¼Œ**ä¸æ˜¯çœŸå®çš„ EQ æµ‹è¯•ç»“æœ**ã€‚ä»…ç”¨äºç ”ç©¶ç›®çš„ï¼Œä¸èƒ½æ›¿ä»£ä¸“ä¸šçš„å¿ƒç†è¯„ä¼°ã€‚

### 5. ç»¼åˆè¯„åˆ†è§£è¯»

**ç¤ºä¾‹ç»“æœåˆ†æï¼š**

```
IQ: 52.9/100  â†’ ä¸­ç­‰åä¸‹æ°´å¹³
EQ: 46.0/100  â†’ è¾ƒä½æ°´å¹³
ä¸»è¦æƒ…ç»ª: ä¸­æ€§ (81.98% ç½®ä¿¡åº¦)
```

**è§£è¯»å»ºè®®ï¼š**
- è¯¥æ ·æœ¬æ˜¾ç¤ºä¸ºä¸­æ€§æƒ…ç»ªï¼Œç½®ä¿¡åº¦è¾ƒé«˜
- IQ å’Œ EQ åˆ†æ•°å¤„äºä¸­ç­‰åä¸‹æ°´å¹³
- æƒ…ç»ªç»´åº¦æ˜¾ç¤ºç•¥åç§¯æä½†å”¤é†’åº¦è¾ƒä½
- **æ³¨æ„**ï¼šè¿™äº›åˆ†æ•°ä»…ä¾›å‚è€ƒï¼Œä¸èƒ½ä½œä¸ºå®é™…èƒ½åŠ›è¯„ä¼°ä¾æ®

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
eye_emotion_iq/
â”œâ”€â”€ data/                      # æ•°æ®ç›®å½•
â”‚   â”œâ”€â”€ raw/                   # åŸå§‹æ•°æ®é›†
â”‚   â”œâ”€â”€ processed/             # é¢„å¤„ç†åçš„æ•°æ®
â”‚   â””â”€â”€ demo_output/           # Demo è¾“å‡ºç»“æœ
â”œâ”€â”€ src/                       # æºä»£ç 
â”‚   â”œâ”€â”€ data/                  # æ•°æ®å¤„ç†æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ dataset.py         # PyTorch æ•°æ®é›†
â”‚   â”‚   â”œâ”€â”€ preprocess.py      # æ•°æ®é¢„å¤„ç†
â”‚   â”‚   â”œâ”€â”€ sa2va_eye_extractor.py  # Sa2VA æå–å™¨
â”‚   â”‚   â””â”€â”€ unified_extractor.py    # ç»Ÿä¸€æå–æ¥å£
â”‚   â”œâ”€â”€ models/                # æ¨¡å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ eye_iq_net.py      # ResNet18 å¤šä»»åŠ¡æ¨¡å‹
â”‚   â”œâ”€â”€ train.py               # è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ evaluate.py            # è¯„ä¼°è„šæœ¬
â”‚   â””â”€â”€ demo.py                # Demo æ¨ç†è„šæœ¬
â”œâ”€â”€ scripts/                   # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ train_tmux.sh          # tmux è®­ç»ƒè„šæœ¬
â”‚   â”œâ”€â”€ preprocess_data.sh     # æ•°æ®é¢„å¤„ç†è„šæœ¬
â”‚   â””â”€â”€ ...
â”œâ”€â”€ checkpoints/               # æ¨¡å‹æ£€æŸ¥ç‚¹
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”‚   â”œâ”€â”€ DATASET_GUIDE.md       # æ•°æ®é›†æŒ‡å—
â”‚   â””â”€â”€ SA2VA_INTEGRATION.md   # Sa2VA é›†æˆè¯´æ˜
â””â”€â”€ requirements.txt           # ä¾èµ–åˆ—è¡¨
```

---

## ğŸ“š æ•°æ®å‡†å¤‡

### å¿«é€Ÿå¼€å§‹ï¼ˆä½¿ç”¨ FER2013 æ•°æ®é›†ï¼‰

```bash
# æ–¹å¼ 1: ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰
bash scripts/download_fer2013.sh  # ä¸‹è½½æ•°æ®é›†
bash scripts/quick_start_training.sh  # é¢„å¤„ç† + è®­ç»ƒ

# æ–¹å¼ 2: æ‰‹åŠ¨æ­¥éª¤
# 1. ä¸‹è½½ FER2013ï¼ˆéœ€è¦ Kaggle è´¦å·ï¼‰
kaggle datasets download -d msambare/fer2013
unzip fer2013.zip -d data/raw/fer2013

# 2. æ•´ç†æ•°æ®æ ¼å¼
python scripts/prepare_fer2013_format.py data/raw/fer2013 data/raw/fer2013_processed

# 3. é¢„å¤„ç†ï¼ˆæå–çœ¼éƒ¨åŒºåŸŸï¼‰
python -m src.data.preprocess \
  --raw-dir data/raw/fer2013_processed/images \
  --output-dir data/processed/fer2013 \
  --format custom
```

### å…¶ä»–æ•°æ®é›†

è¯¦ç»†çš„æ•°æ®é›†ä¸‹è½½æŒ‡å—è¯·å‚è€ƒï¼š[æ•°æ®é›†ä¸‹è½½æŒ‡å—](docs/DATASET_GUIDE.md)

### çœ¼éƒ¨æå–åç«¯

**MediaPipeï¼ˆé»˜è®¤ï¼‰**
- âœ… å¿«é€Ÿã€è½»é‡
- âœ… åŸºäºå…³é”®ç‚¹æ£€æµ‹
- âœ… é€‚åˆå®æ—¶å¤„ç†

**Sa2VA**
- âœ… æ›´ç²¾ç¡®çš„è¯­ä¹‰åˆ†å‰²
- âš ï¸ éœ€è¦æ›´å¤šè®¡ç®—èµ„æº
- âš ï¸ éœ€è¦ GPU æ”¯æŒ

ä½¿ç”¨ Sa2VAï¼š
```bash
python -m src.data.preprocess \
  --raw-dir data/raw/my_dataset \
  --output-dir data/processed \
  --format custom \
  --use-sa2va \
  --sa2va-model OMG-Research/Sa2VA-4B
```

---

## ğŸ“ è®­ç»ƒæŒ‡å—

### åŸºæœ¬è®­ç»ƒ

```bash
python src/train.py \
  --metadata data/processed/metadata.csv \
  --image-root data/processed/images \
  --epochs 30 \
  --batch-size 32 \
  --lr 2e-4 \
  --num-emotions 7
```

### ä½¿ç”¨ tmux åå°è®­ç»ƒ

```bash
# å¯åŠ¨åå°è®­ç»ƒï¼ˆæ¨èï¼‰
bash scripts/train_tmux.sh

# æŸ¥çœ‹è®­ç»ƒè¿›åº¦
tmux attach -t eye_iq_train

# åˆ†ç¦»ä¼šè¯ï¼ˆè®­ç»ƒç»§ç»­ï¼‰
# æŒ‰ Ctrl+Bï¼Œç„¶åæŒ‰ D
```

### è®­ç»ƒå‚æ•°è¯´æ˜

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `--metadata` | å…ƒæ•°æ® CSV æ–‡ä»¶è·¯å¾„ | å¿…éœ€ |
| `--image-root` | å›¾åƒæ ¹ç›®å½• | å¿…éœ€ |
| `--epochs` | è®­ç»ƒè½®æ•° | 10 |
| `--batch-size` | æ‰¹æ¬¡å¤§å° | 32 |
| `--lr` | å­¦ä¹ ç‡ | 2e-4 |
| `--num-emotions` | æƒ…ç»ªç±»åˆ«æ•° | 7 |
| `--num-workers` | æ•°æ®åŠ è½½çº¿ç¨‹æ•° | 4 |
| `--device` | è®¡ç®—è®¾å¤‡ (cuda/cpu) | è‡ªåŠ¨é€‰æ‹© |
| `--checkpoint-dir` | æ£€æŸ¥ç‚¹ä¿å­˜ç›®å½• | checkpoints |

### è®­ç»ƒè¾“å‡º

è®­ç»ƒè¿‡ç¨‹ä¸­ä¼šè¾“å‡ºï¼š
- **æŸå¤±å€¼ (Loss)**ï¼šæ€»æŸå¤±ï¼ˆåˆ†ç±» + å›å½’ï¼‰
- **å‡†ç¡®ç‡ (Accuracy)**ï¼šæƒ…ç»ªåˆ†ç±»å‡†ç¡®ç‡
- **F1 åˆ†æ•° (F1-Score)**ï¼šå®å¹³å‡ F1 åˆ†æ•°
- **å›å½’æŒ‡æ ‡**ï¼šå„å›å½’ä»»åŠ¡çš„ MAEï¼ˆå¹³å‡ç»å¯¹è¯¯å·®ï¼‰

æ¯ä¸ª epoch ç»“æŸåä¼šä¿å­˜æ£€æŸ¥ç‚¹åˆ° `checkpoints/epoch_{epoch}.pt`

---

## ğŸ” æ¨ç†ä¸è¯„ä¼°

### å•å¼ å›¾ç‰‡æ¨ç†

```bash
python -m src.demo \
  --image path/to/image.jpg \
  --checkpoint checkpoints/epoch_30.pt \
  --output-eye output/eye_region.jpg \
  --format pretty  # æˆ– json
```

### æ‰¹é‡è¯„ä¼°

```bash
python src/evaluate.py \
  --checkpoint checkpoints/epoch_30.pt \
  --metadata data/processed/test_metadata.csv \
  --image-root data/processed/images
```

---

## ğŸ“ˆ æ¨¡å‹æ€§èƒ½

### è®­ç»ƒæ•°æ®
- **æ•°æ®é›†**ï¼šFER2013
- **æ ·æœ¬æ•°é‡**ï¼š35,887 å¼ å›¾åƒ
- **æƒ…ç»ªåˆ†å¸ƒ**ï¼š
  - å¿«ä¹ï¼š8,989 (25.0%)
  - ä¸­æ€§ï¼š6,198 (17.3%)
  - æ‚²ä¼¤ï¼š6,077 (16.9%)
  - æ„¤æ€’ï¼š4,953 (13.8%)
  - ææƒ§ï¼š5,121 (14.3%)
  - æƒŠè®¶ï¼š4,002 (11.2%)
  - åŒæ¶ï¼š547 (1.5%)

### æ¨¡å‹æ¶æ„
- **ä¸»å¹²ç½‘ç»œ**ï¼šResNet18ï¼ˆé¢„è®­ç»ƒï¼‰
- **å¤šä»»åŠ¡å¤´**ï¼š
  - æƒ…ç»ªåˆ†ç±»å¤´ï¼ˆ7 ç±»ï¼‰
  - æ•ˆä»·å›å½’å¤´
  - å”¤é†’åº¦å›å½’å¤´
  - IQ ä»£ç†åˆ†æ•°å›å½’å¤´
  - EQ ä»£ç†åˆ†æ•°å›å½’å¤´

---

## âš ï¸ ä¼¦ç†æç¤ºä¸é™åˆ¶

### é‡è¦å£°æ˜

1. **IQ/EQ é¢„æµ‹é™åˆ¶**
   - ä»…å‡­çœ¼éƒ¨å›¾åƒè¯„ä¼° IQ/EQ **æœªç»ç§‘å­¦éªŒè¯**
   - é¢„æµ‹ç»“æœ**ä¸èƒ½æ›¿ä»£**ä¸“ä¸šçš„å¿ƒç†è¯„ä¼°
   - ä»…é™**ç ”ç©¶ç”¨é€”**ï¼Œè¯·å‹¿ç”¨äºä»»ä½•å†³ç­–ç³»ç»Ÿ

2. **æ•°æ®éšç§**
   - é‡‡é›†ç”Ÿç‰©è¯†åˆ«æ•°æ®å¿…é¡»è·å¾—**æ˜ç¡®çŸ¥æƒ…åŒæ„**
   - åŸå§‹å›¾åƒéœ€**å®‰å…¨å­˜å‚¨**
   - éµå®ˆæœ¬åœ°éšç§æ³•è§„ï¼ˆå¦‚ GDPRã€CCPAï¼‰

3. **åè§é£é™©**
   - æ¨¡å‹å¯èƒ½æ”¾å¤§ç°æœ‰åè§
   - éœ€è¦å¤šæ ·åŒ–çš„è®­ç»ƒæ•°æ®
   - å®šæœŸè¯„ä¼°æ¨¡å‹çš„å…¬å¹³æ€§

4. **ä½¿ç”¨å»ºè®®**
   - âœ… ç”¨äºå­¦æœ¯ç ”ç©¶
   - âœ… ç”¨äºæŠ€æœ¯éªŒè¯
   - âŒ ç”¨äºæ‹›è˜å†³ç­–
   - âŒ ç”¨äºåŒ»ç–—è¯Šæ–­
   - âŒ ç”¨äºæ³•å¾‹åˆ¤æ–­

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†ä»“åº“
git clone <repository-url>
cd eye_emotion_iq

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt
pip install -r requirements-dev.txt  # å¦‚æœæœ‰
```

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

## ğŸ™ è‡´è°¢

- [FER2013 Dataset](https://www.kaggle.com/datasets/msambare/fer2013)
- [MediaPipe](https://mediapipe.dev/)
- [Sa2VA](https://github.com/OMG-Research/Sa2VA)
- [PyTorch](https://pytorch.org/)

---

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»é¡¹ç›®ç»´æŠ¤è€…ã€‚

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼â­**

Made with â¤ï¸ by the Eye Emotion IQ Team

</div>
